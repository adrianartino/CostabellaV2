
{% extends "menu.html" %}
{% load static %}

{% block titulo %}
Informe de ventas | Costabella
{% endblock %}

{% block estilos %}

{% endblock %}

{% block contenido%}

<div class="nk-content-inner">
    <div class="nk-content-body">
        <div class="nk-block-head nk-block-head-sm">
            <div class="nk-block-between">
                <div class="nk-block-head-content">
                    <h3 class="nk-block-title page-title color-texto-seleccion animate__animated animate__slideInLeft">INFORME DE VENTAS AÑO ACTUAL</h3>
                    <div class="nk-block-des text-soft animate__animated animate__slideInUp">
                        <p>Informe de ventas totales en todas las sucursales <span class="fw-bold text-pink ">Costabella.</span></p>
                    </div>
                    
                    <div class="nk-block-des">
                        <h4 class="nk-block-title animate__animated animate__slideInUp">Del 01 de Enero al 31 de Diciembre del 2022.</h4>
                        
                    </div>
                    

                    

                    
                </div><!-- .nk-block-head-content -->
                <div class="nk-block-head-content">
                    <div class="toggle-wrap nk-block-tools-toggle">
                        <a href="#" class="btn btn-icon btn-trigger toggle-expand mr-n1" data-target="pageMenu"><em class="icon ni ni-more-v"></em></a>
                        <div class="toggle-expand-content" data-content="pageMenu">
                            <ul class="nk-block-tools g-3">
                                <li>
                                  <div class="form-control-wrap">
                                      <select class="form-select form-control form-control-lg" id="selectInformeHtml" onchange="selectInforme();">
                                          <option value="informeDeVentas" >Mes Actual</option>
                                          <option value="informeDeVentasAnual" selected>Año actual</option>
                                          <option value="rangofechas">Rango de fechas</option>
                                      </select>
                                  </div>
                                </li>
                                
                            </ul>
                        </div>
                    </div>
                </div><!-- .nk-block-head-content -->
                
            </div><!-- .nk-block-between -->
        </div><!-- .nk-block-head -->


        
        <div class="nk-block" id="mesactual">
            <div class="row g-gs">
                <div class="col-xxl-6">
                    <div class="row g-gs">
                        <div class="col-lg-6 col-xxl-12">
                            <div class="card">
                                <div class="card-inner">
                                    <div class="nk-sale-data-group">
                                        <div class="card-title">
                                            <h6 class="title text-left"><em class="card-hint icon ni ni-help-fill" data-toggle="tooltip" data-placement="left" title="Los ingresos por ventas son las entradas de dinero consecuente de una venta, renta o pagos de créditos en cualquier forma de pago."></em> Ingresos por venta en el año</h6>
                                            <p>Ingresos por venta, renta y pagos de créditos.</p>
                                        </div>
                                        
                                    </div>
                                    <div class="align-end gy-3 gx-5 flex-wrap flex-md-nowrap flex-lg-wrap flex-xxl-nowrap">
                                        <div class="nk-sale-data-group flex-md-nowrap g-4">
                                            <div class="nk-sale-data">
                                                {% if esMayor %}
                                                <span class="amount">${{montoIngresoAñoActual}} <span style="cursor: pointer;" class="change up text-success"  data-toggle="tooltip" data-placement="bottom" title="${{montoIngresoAñoAnterior}} MXN el año {{strAñoAnterior}}."><em class="icon ni ni-arrow-long-up"></em>{{porcentajeIngresosAño}}%</span></span>
                                                {% else %}
                                                <span class="amount">${{montoIngresoAñoActual}} <span style="cursor: pointer;" class="change down text-danger"  data-toggle="tooltip" data-placement="bottom" title="${{montoIngresoAñoAnterior}} MXN el año {{strAñoAnterior}}."><em class="icon ni ni-arrow-long-down"></em>{{porcentajeIngresosAño}}%</span></span>
                                                {% endif %}
                                                <span class="sub-title">Este mes</span>
                                                
                                               
                                            </div>
                                            
                                        </div>
                                        
                                       
                                   
                                    </div>
                                    <div class="nk-ck-sm">
                                        <canvas class="line-chart" id="filledLineChart"></canvas>
                                        <center>
                                            <div class="nk-sale-data">
                                                <span class="sub-title ">Gráfico de ingresos por año.</span>
                                            </div>
                                        </center>
                                        
                                    </div>
                                    <br>
                                    
                                </div>
                            </div>
                        </div><!-- .col -->
                        
                    </div><!-- .row -->
                </div><!-- .col -->
                
                <div class="col-xxl-3">
                    <div class="row g-gs">
                        <div class="col-sm-6 col-lg-12 ">
                            <div class="card h-100">
                                <div class="card-inner">
                                    <div class="card-title-group">
                                        <div class="card-title">
                                            <h6 class="title">Gráfica Ingresos totales</h6>
                                            <p>N° de ventas, rentas y créditos.</p>
                                        </div>
                                       
                                    </div>
                                    <div class="traffic-channel">
                                        <div class="traffic-channel-doughnut-ck">
                                            <canvas class="analytics-doughnut" id="TrafficChannelDoughnutData"></canvas>
                                        </div>
                                        <div class="traffic-channel-group g-2">
                                            <div class="traffic-channel-data">
                                                <div class="title"><span class="dot dot-lg sq" data-bg="#FD5D5D"></span><span> {{numeroVentas}} Ventas</span></div>
                                                <div class="amount"><span class="fw-bold text-teal">${{contadorVentasAñoActual}} <span class="text-dark">MXN</span></span></div>
                                            </div>
                                            <div class="traffic-channel-data">
                                                <div class="title"><span class="dot dot-lg sq" data-bg="#55D8C1"></span><span>{{numeroRentas}} Rentas</span></div>
                                                <div class="amount"><span class="fw-bold text-teal">${{contadorRentasAñoActual}} <span class="text-dark">MXN</span></span></div>
                                            </div>
                                            <div class="traffic-channel-data ">
                                               
                                                <div class="title"><span class="dot dot-lg sq" data-bg="#FCF69C"></span><span> {{numeroCreditos}} Créditos</span></div>
                                                <div class="amount"><span class="fw-bold text-teal">${{contadorCreditosAñoActual}} <span class="text-dark">MXN</span></span></div>
                                                
                                                    
                                            </div>
                                            
                                        </div><!-- .traffic-channel-group -->
                                       
                                    </div><!-- .traffic-channel -->
                                </div>
                            </div><!-- .card -->
                        </div>
                    </div>
                </div><!-- .col -->
                <div class="col-xxl-3">
                    <div class="row g-gs">
                        <div class="col-sm-6 col-lg-12 ">
                            <div class="card h-100">
                                <div class="card-inner">
                                    <div class="nk-sale-data-group mb-2">
                                        <div class="card-title">
                                            <h6 class="title text-left"><em class="card-hint icon ni ni-help-fill" data-toggle="tooltip" data-placement="left" title="Las compras efectuadas van desde productos para gasto y productos para venta."></em>&nbsp;Compras efectuadas. <a  data-toggle="modal" data-target="#modalComprasDelMes"><small class="badge badge-warning text-dark"> Ver todas.</small></a></h6>
                                            <p>Compras de productos realizadas en mes actual.</p>
                                        </div>
                                   
                                    </div>
                                    <div class="analytic-au">
                                        <div class="analytic-data-group analytic-au-group g-3">
                                            <div class="analytic-data analytic-au-data">
                                                <div class="title">Productos Gasto</div>
                                                <div class="amount">${{totalComprasMesGasto}} MXN.</div>
                                                <p class="fw-bold text-azure fs-10px">{{numeroComprasGasto}} unidades</p>
                                            </div>
                                            <div class="analytic-data analytic-au-data">
                                                <div class="title">Productos Venta</div>
                                                <div class="amount">${{totalComprasMesVenta}} MXN.</div>
                                                <p class="fw-bold text-azure fs-10px">{{numeroComprasVenta}} unidades</p>
                                            </div>
                                            <div class="analytic-data analytic-au-data">
                                                <div class="title">Productos Renta</div>
                                                <div class="amount">${{totalComprasMesRenta}} MXN.</div>
                                                <p class="fw-bold text-azure fs-10px">{{numeroComprasRenta}} unidades</p>
                                            </div>
                                        </div>
                                        <br>
                                        <center>
                                            <p class="title fw-bold fs-20px">Total de compras en el año</p>
                                            <br>
                                            <div class="analytic-data analytic-au-data">
                                                <div class="amount fw-bold text-teal">${{sumaTotalesCompras}} MXN.</div>
                                            </div>
                                            
                                        </center>
                                        
                                    </div>
                                </div>
                            </div><!-- .card -->
                        </div>
                    </div>
                </div><!-- .col -->
                  <div class="col-md-6 col-xxl-3">
                    <div class="card card-full">
                        <div class="card-inner">
                            <div class="nk-sale-data-group">
                                <div class="card-title">
                                    <h6 class="title text-left"><em class="card-hint icon ni ni-help-fill" data-toggle="tooltip" data-placement="left" title="Tabla comparativa de los ingresos y compras realizadas en el mes actual."></em> Relación ingresos y compras.</h6>
                                    <p>Gráfico comparativo de ventas efectuadas y compras realizadas.</p>
                                </div>
                                
                            </div>  
                            <br>
                            <div class="nk-ck">
                                <canvas class="bar-chart" id="barChartData"></canvas>
                            </div>
                        </div>
                      
                    </div><!-- .card -->
                </div><!-- .col -->
                <div class="col-xxl-3">
                    <div class="card card-full">
                        <div class="card-inner">
                            <div class="nk-sale-data-group mb-2">
                                <div class="card-title">
                                    <h6 class="title text-left"><em class="card-hint icon ni ni-help-fill" data-toggle="tooltip" data-placement="left" title="Las ventas pueden ser pagadas por el cliente en efectivo, tarjeta o trasnferencia."></em>&nbsp;Ventas por tipo de pago.</h6>
                                    <p>Listado de montos pagados con diferentes tipos de pagos.</p>
                                    
                                </div>
                           
                            </div>
                            <div class="card-inner p-0 border-top">
                              <div class="nk-tb-list nk-tb-orders">
                                  <div class="nk-tb-item nk-tb-head">
                                      <div class="nk-tb-col"><span class="text-dark">Tipo de pago</span></div>
                                      <div class="nk-tb-col"><span class="text-dark">Concepto</span></div>
                                      <div class="nk-tb-col"><span class="text-dark">Total de ingreso</span></div>
                                     
                                  </div>
                                  <div class="nk-tb-item">
                                      <div class="nk-tb-col">
                                          <img src="{% static 'images/accesos/efectivoInforme.png' %}" alt="efectivo" width="50">
                                      </div>
                                      <div class="nk-tb-col">
                                        <p class="fw-bold text-dark">Efectivo</p>
                                      </div>
                                      <div class="nk-tb-col tb-col-sm">
                                          <div class="user-card">
                                              
                                              <div class="user-name">
                                                <span class="tb-sub tb-amount fw-bold text-azure">${{totalEfectivo}} <span>MXN</span></span>
                                              </div>
                                          </div>
                                      </div>
                                      
                                  </div>
                                  <div class="nk-tb-item">
                                      <div class="nk-tb-col">
                                        <img src="{% static 'images/accesos/tarjeta.png' %}" alt="efectivo" width="50">
                                      </div>
                                      <div class="nk-tb-col">
                                        <p class="fw-bold text-dark">Tarjeta</p>
                                      </div>
                                      <div class="nk-tb-col tb-col-sm">
                                          <div class="user-card">
                                              
                                              <div class="user-name">
                                                <span class="tb-sub tb-amount fw-bold text-azure">${{totalTarjeta}} <span>MXN</span></span>
                                              </div>
                                          </div>
                                      </div>
                                      
                                  </div>
                                  <div class="nk-tb-item">
                                      <div class="nk-tb-col">
                                        <img src="{% static 'images/accesos/transferencia.png' %}" alt="efectivo" width="50">
                                      </div>
                                      <div class="nk-tb-col">
                                        <p class="fw-bold text-dark">Transferencia</p>
                                      </div>
                                      <div class="nk-tb-col tb-col-sm">
                                          <div class="user-card">
                                              
                                              <div class="user-name">
                                                <span class="tb-sub tb-amount fw-bold text-azure">${{totalTransferencia}} <span>MXN</span></span>
                                              </div>
                                          </div>
                                      </div>
                                      
                                  </div>
                                  
                                  
                              </div>
                          </div>
                           
                        </div>
                    </div><!-- .card -->
                </div><!-- .col -->
                
                <div class="col-md-6 col-xxl-3">
                    <div class="card card-full">
                        <div class="card-inner-group">
                            
                            <div class="card-inner card-inner-md">
                              <div class="nk-sale-data-group mb-2">
                                <div class="card-title">
                                    <h6 class="title text-left"><em class="card-hint icon ni ni-help-fill" data-toggle="tooltip" data-placement="left" title="Se muestran los clientes que más han sido constantes en Costabella."></em>&nbsp;Top 3 clientes del año <a  data-toggle="modal" data-target="#modalClientesDelMes"><small class="badge badge-warning text-dark"> Ver todos.</small></a></h6>
                                    <p>Listado de clientes con mayores movimientos de compras y rentas.</p>
                                    <div class="text-center">
                                      <center>
                                        <img src="{% static 'images/accesos/iconoClienteMes.png' %}" alt="iconoempleado" width="60">
                                      </center>
                                    </div>
                                </div>
                           
                              </div>
                              <div class="card-inner p-0 border-top">
                                <div class="nk-tb-list nk-tb-orders">
                                    <div class="nk-tb-item nk-tb-head">
                                        <div class="nk-tb-col"><span class="text-dark">Id</span></div>
                                        <div class="nk-tb-col"><span class="text-dark">Nombre</span></div>
                                        <div class="nk-tb-col"><span class="text-dark">Total comprado</span></div>
                                    </div>
                                    {% for id, monto,contador,nombre in clientesTops %}

                                    {% if contador < 4 %}
                                    <div class="nk-tb-item">
                                      <div class="nk-tb-col">
                                        <span class="badge badge-primary">{{id}}</span>
                                      </div>
                                      <div class="nk-tb-col tb-col-sm">
                                          <div class="user-card">
                                              <div class="user-name">
                                                  <span class="tb-lead">{{nombre.0}} {{nombre.1}} {{nombre.2}}</span>
                                              </div>
                                          </div>
                                      </div>
                                      
                                      <div class="nk-tb-col tb-col-lg">
                                          <span class="tb-sub tb-amount text-teal fw-bold">${{monto}} <span>MXN</span></span>
                                      </div>
                                      
                                    </div>
                                    {% endif %}
                                    
                                    {% endfor %}
                                    
                                    
                                    
                                    
                                </div>
                              </div>
                                
                            </div>
                            
                        </div>
                    </div><!-- .card -->
                </div><!-- .col -->
                <div class="col-md-6 col-xxl-3">
                  <div class="card card-full">
                      <div class="card-inner-group">
                          
                          <div class="card-inner card-inner-md">
                            <div class="nk-sale-data-group mb-2">
                              <div class="card-title">
                                  <h6 class="title text-left"><em class="card-hint icon ni ni-help-fill" data-toggle="tooltip" data-placement="left" title="Se muestran los empleados que más han vendido en el mes."></em>&nbsp;Top 3 empleados del año <a  data-toggle="modal" data-target="#modalEmpleadosDelMes"><small class="badge badge-warning text-dark"> Ver todos.</small></a></h6>
                                  <p>Listado de empleados con mayores ventas en el mes actual.</p>
                                  <div class="text-center">
                                    <center>
                                      <img src="{% static 'images/accesos/iconoEmpleadoMes.png' %}" alt="iconoempleado" width="60">
                                    </center>
                                  </div>
                              </div>
                              
                         
                            </div>
                            
                            <div class="card-inner p-0 border-top">
                              <div class="nk-tb-list nk-tb-orders">
                                  <div class="nk-tb-item nk-tb-head">
                                      <div class="nk-tb-col"><span class="text-dark">Id</span></div>
                                      <div class="nk-tb-col"><span class="text-dark">Nombre</span></div>
                                      <div class="nk-tb-col"><span class="text-dark">Total ventas</span></div>
                                      <div class="nk-tb-col"><span class="text-dark">Total vendido</span></div>
                                  </div>
                                  
                                  {% for id, ventas,contador,nombre, monto in empleadosTops %}

                                  {% if contador < 4 %}
                                  <div class="nk-tb-item">
                                    <div class="nk-tb-col">
                                      <span class="badge badge-info">{{id}}</span>
                                    </div>
                                    <div class="nk-tb-col tb-col-sm">
                                        <div class="user-card">
                                            <div class="user-name">
                                                <span class="tb-lead">{{nombre}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="nk-tb-col tb-col-lg">
                                        <span class="tb-sub tb-amount text-teal fw-bold">{{ventas}} <span>Ventas</span></span>
                                    </div>
                                    <div class="nk-tb-col tb-col-sm">
                                      <span class="tb-sub tb-amount text-teal fw-bold text-teal">${{monto}} <span>MXN.</span></span>
                                  </div>
                                    
                                  </div>
                                  {% endif %}
                                  
                                  {% endfor %}
                                  
                                  
                                  
                                  
                              </div>
                            </div>
                              
                          </div>
                          
                      </div>
                  </div><!-- .card -->
              </div><!-- .col -->
                <div class="col-lg-6 col-xxl-4">
                  <div class="card h-100">
                    <div class="card-inner">
                      <div class="nk-sale-data-group mb-2">
                        <div class="card-title">
                            <h6 class="title text-left"><em class="card-hint icon ni ni-help-fill" data-toggle="tooltip" data-placement="left" title="Se muestran los productos más vendidos en el mes."></em>&nbsp;Top productos vendidos del año.</h6>
                            <p>Listado de productos con mayor movimiento en ventas.</p>
                        </div>
                   
                      </div>
                      {% if listaFinalProductosMesTabla %}
                        <ul class="nk-top-products">
                            {% for producto, contador, infoProducto in listaFinalProductosMesTabla %}
                            {% if contador > 5 %}
                            
                            {% else %}
                            <li class="item">
                              <div class="thumb">
                                  {% if infoProducto.3 %}
                                  <img src="{{infoProducto.3.url}}" alt="producto" width="50">
                                  {% else %}
                                  <p>NA</p>
                                  {% endif %}
                              </div>
                              <div class="info">
                                  <div class="title"><span class="fw-bold text-indigo">{{producto.0}} -</span> {{infoProducto.0}}</div>
                                  <div class="price">${{infoProducto.1}} MXN</div>
                              </div>
                              <div class="total">
                                  <div class="amount"><span class="text-pink fw-bold">${{infoProducto.2}}</span> MXN</div>
                                  <div class="count">{{producto.1}} vendidos</div>
                              </div>
                          </li>
                            {% endif %}
                        
                            {% endfor %}
                            
                           
                        </ul>
                        {% else %}
                        <p class="fw-bold text-dark">No se vendieron productos en el año.</p>
                        {% endif %}
                    </div><!-- .card-inner -->
                </div><!-- .card -->
                </div><!-- .col -->
                <div class="col-lg-6 col-xxl-4">
                  <div class="card h-100">
                    <div class="card-inner">
                      <div class="nk-sale-data-group mb-2">
                        <div class="card-title">
                            <h6 class="title text-left"><em class="card-hint icon ni ni-help-fill" data-toggle="tooltip" data-placement="left" title="Se muestran los servicios más brindados en el mes."></em>&nbsp;Top servicios brindados del año.</h6>
                            <p>Listado de servicios con mayor solicitud.</p>
                        </div>
                   
                      </div>
                      {% if listaFinalServiciosMesTabla %}
                        <ul class="nk-top-products">
                            {% for servicio, contador, infoServicio in listaFinalServiciosMesTabla %}
                              {% if contador > 5 %}
                              
                              {% else %}
                              <li class="item">
                                <div class="info">
                                    <div class="title"><span class="fw-bold text-indigo">{{servicio.0}} - Servicio {{infoServicio.0}}</span> {{infoServicio.1}}</div>
                                    <div class="price">${{infoServicio.2}} MXN</div>
                                </div>
                                <div class="total">
                                    <div class="amount"><span class="text-info fw-bold">${{infoServicio.3}}</span> MXN</div>
                                    <div class="count">{{servicio.1}} vendidos</div>
                                </div>
                            </li>
                              {% endif %}
                          
                            {% endfor %}
                           
                        </ul>
                        {% else %}
                        <p class="fw-bold text-dark">No se vendieron servicios en el año.</p>
                        {% endif %}
                    </div><!-- .card-inner -->
                </div><!-- .card -->
                </div><!-- .col -->
                <div class="col-lg-6 col-xxl-4">
                  <div class="card h-100">
                    <div class="card-inner">
                      <div class="nk-sale-data-group mb-2">
                        <div class="card-title">
                            <h6 class="title text-left"><em class="card-hint icon ni ni-help-fill" data-toggle="tooltip" data-placement="left" title="Se muestran los productos más rentados en el mes."></em>&nbsp;Top productos rentados del año.</h6>
                            <p>Listado de productos con mayor movimiento en rentas.</p>
                        </div>
                   
                      </div>
                      {% if listaFinalProductosRentaMesTabla %}
                        <ul class="nk-top-products">
                            {% for producto, contador, infoProducto in listaFinalProductosRentaMesTabla %}
                                {% if contador > 5 %}
                                
                                {% else %}
                                <li class="item">
                                  <div class="thumb">
                                    {% if infoProducto.3 %}
                                    <img src="{{infoProducto.3.url}}" alt="producto" width="30">
                                    {% else %}
                                    <p>NA</p>
                                    {% endif %}
                                  </div>
                                  <div class="info">
                                      <div class="title"><span class="fw-bold text-indigo">{{producto.0}} - </span> {{infoProducto.0}}</div>
                                      <div class="price">${{infoProducto.1}} MXN</div>
                                  </div>
                                  <div class="total">
                                      <div class="amount"><span class="text-purple fw-bold">${{infoProducto.2}}</span> MXN</div>
                                      <div class="count">{{producto.1}} rentados</div>
                                  </div>
                              </li>
                                {% endif %}
                          
                            {% endfor %}
                            
                        </ul>
                        {% else %}
                        <p class="fw-bold text-dark">No se rentaron productos en el año.</p>
                        {% endif %}
                    </div><!-- .card-inner -->
                </div><!-- .card -->
                </div><!-- .col -->
                
               
            </div><!-- .row -->
        </div><!-- .nk-block -->
    </div>
</div>

<!-- Modal clientes del mes -->
<div class="modal fade" tabindex="-1" id="modalClientesDelMes">
  <div class="modal-dialog modal-md" role="document">
      <div class="modal-content">
          <a href="#" class="close" data-dismiss="modal" aria-label="Close">
              <em class="icon ni ni-cross"></em>
          </a>
          <div class="modal-header">
              <p class="modal-title fw-bold text-dark fs-20px"><em class="icon ni ni-user-list"></em> Tabla de clientes del mes de {{mesdehoy}}.</p>
          </div>
          <div class="modal-body">
              
            <div class="card-inner table-responsive">
              <table class="datatable-init nk-tb-list nk-tb-ulist animate__animated animate__zoomIn" data-auto-responsive="false">
                  <thead>
                      <tr class="nk-tb-item nk-tb-head" style="background-color: #1F4690 !important; color:white !important">
                          <th class="nk-tb-col"><span class="sub-text textoBlanco" style="white-space:nowrap!important;">Id cliente</span></th>
                          <th class="nk-tb-col"><span class="sub-text textoBlanco">Nombre</span></th>
                          <th class="nk-tb-col"><span class="sub-text textoBlanco">Total Comprado</span></th>
                        
                      </tr>
                  </thead>
                  <tbody>
                      {% for id, monto,contador,nombre in clientesTopsModal %}
                      <tr class="nk-tb-item">
                          <td class="nk-tb-col">
                              <span class="badge badge-info">{{id}}</span>
                          </td>
                         
                          <td class="nk-tb-col">
                                  <div>
                                      <span class="badge badge-dark">{{nombre.0}} {{nombre.1}} {{nombre.2}}</span>
                                  </div>
                              
                              
                          </td>
                          <td class="nk-tb-col" style="white-space:nowrap!important;">
                              
                            <center>
                              <div>
                                  <span class="fw-bold text-teal">${{monto}} MXN.</span>
                              </div>
                          </center>
                          </td>
                          
                         

                      </tr>
                      {% endfor %}
                      
                  </tbody>
              </table>

          
          </div>
          </div>
          <div class="modal-footer bg-light">
              <span class="fw-bold text-pink">Costabella</span>
          </div>
      </div>
  </div>
</div>

<!-- Modal empleados del mes -->
<div class="modal fade" tabindex="-1" id="modalEmpleadosDelMes">
  <div class="modal-dialog modal-md" role="document">
      <div class="modal-content">
          <a href="#" class="close" data-dismiss="modal" aria-label="Close">
              <em class="icon ni ni-cross"></em>
          </a>
          <div class="modal-header">
              <p class="modal-title fw-bold text-dark fs-20px"><em class="icon ni ni-account-setting-alt"></em> Tabla de ventas de empleados del mes de {{mesdehoy}}.</p>
          </div>
          <div class="modal-body">
              
            <div class="card-inner table-responsive">
              <table class="datatable-init nk-tb-list nk-tb-ulist animate__animated animate__zoomIn" data-auto-responsive="false">
                  <thead>
                      <tr class="nk-tb-item nk-tb-head" style="background-color: #1F4690 !important; color:white !important">
                          <th class="nk-tb-col"><span class="sub-text textoBlanco" style="white-space:nowrap!important;">Id empleado</span></th>
                          <th class="nk-tb-col"><span class="sub-text textoBlanco">Nombre</span></th>
                          <th class="nk-tb-col"><span class="sub-text textoBlanco">Total Ventas</span></th>
                          <th class="nk-tb-col"><span class="sub-text textoBlanco">Total Vendido</span></th>
                      </tr>
                  </thead>
                  <tbody>
                      {% for id, numVentas,contador,nombre, monto in empleadosTopsModal %}
                      <tr class="nk-tb-item">
                          <td class="nk-tb-col">
                              <span class="badge badge-info">{{id}}</span>
                          </td>
                         
                          <td class="nk-tb-col">
                                  <div>
                                      <span class="badge badge-dark">{{nombre}}</span>
                                  </div>
                              
                              
                          </td>
                          <td class="nk-tb-col">
                            <div>
                                <span class="fw-bold text-azure">{{numVentas}} ventas</span>
                            </div>
                        
                        
                    </td>
                          <td class="nk-tb-col" style="white-space:nowrap!important;">
                              
                            <center>
                              <div>
                                  <span class="fw-bold text-teal">${{monto}} MXN.</span>
                              </div>
                          </center>
                          </td>
                          
                         

                      </tr>
                      {% endfor %}
                      
                  </tbody>
              </table>

              {% for y in listaReversaEfectivo %}
              <h1>{{y.id_venta}}</h1>
              {% endfor %}
          
          </div>
          </div>
          <div class="modal-footer bg-light">
              <span class="fw-bold text-pink">Costabella</span>
          </div>
      </div>
  </div>
</div>

<!-- Modal empleados del mes -->
<div class="modal fade" tabindex="-1" id="modalComprasDelMes">
  <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
          <a href="#" class="close" data-dismiss="modal" aria-label="Close">
              <em class="icon ni ni-cross"></em>
          </a>
          <div class="modal-header">
              <p class="modal-title fw-bold text-dark fs-20px"><em class="icon ni ni-cart"></em> Tabla de compras efectuadas del mes de {{mesdehoy}}.</p>
          </div>
          <div class="modal-body">
            <ul class="nav nav-tabs">
              <li class="nav-item">
                  <a class="nav-link active" data-toggle="tab" href="#productosGasto">Productos Gasto</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" data-toggle="tab" href="#productosVenta">Productos Venta</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" data-toggle="tab" href="#productosRenta">Productos Renta</a>
              </li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane active" id="productosGasto">
                                  
                  
                </div>
                <div class="tab-pane" id="productosVenta">
                  
                  {% if comprasProductosVentas %}
                  <div class="card-inner table-responsive">
                    <table class="datatable-init nk-tb-list nk-tb-ulist animate__animated animate__zoomIn" data-auto-responsive="false">
                        <thead>
                            <tr class="nk-tb-item nk-tb-head" style="background-color: #FFC3C3 !important; color:white !important">
                                <th class="nk-tb-col"><span class="sub-text textoBlanco" style="white-space:nowrap!important;">Id</span></th>
                                <th class="nk-tb-col"><span class="sub-text textoBlanco">Producto</span></th>
                                <th class="nk-tb-col"><span class="sub-text textoBlanco">Imagen</span></th>
                                <th class="nk-tb-col"><span class="sub-text textoBlanco">Fecha</span></th>
                                <th class="nk-tb-col"><span class="sub-text textoBlanco">Sucursal</span></th>
                                <th class="nk-tb-col"><span class="sub-text textoBlanco">Costo Compra</span></th>
                                <th class="nk-tb-col"><span class="sub-text textoBlanco">Cantidad Comprada</span></th>
                                <th class="nk-tb-col"><span class="sub-text textoBlanco">Total</span></th>
                            </tr>
                        </thead>
                        <tbody>
                            
                            {% for compra in comprasProductosVentas %}
                            <tr class="nk-tb-item">
                                <td class="nk-tb-col">
                                    <span class="badge badge-info">{{compra.0}}</span>
                                </td>
                                
                                <td class="nk-tb-col" style="white-space:nowrap!important;">
                                        <div>
                                          <span class="badge badge-dark">{{compra.1}}</span>
                                        </div>
                                    
                                    
                                </td>
                                <td class="nk-tb-col">
                                  <div>
                                    {% if compra.2 %}
                                    <img src="{{compra.2.url}}" alt="imagenProducto" width="60">
                                    {% else %}
                                    <p class="fw-bold text-dark">Sin imagen</p>
                                    {% endif %}
                                  </div>
                              
                              
                                </td>
                                
                                <td class="nk-tb-col">
                                  <span class="badge badge-outline-dark">{{compra.3}}</span>
                                </td>
                                <td class="nk-tb-col">
                                  <span class="badge badge-warning">{{compra.4}}</span>
                                </td>
                                <td class="nk-tb-col" style="white-space:nowrap!important;">
                                  <span class="fw-bold text-teal">${{compra.5}} MXN.</span>
                                </td>
                                <td class="nk-tb-col">
                                  {% if compra.6 == 1 %}
                                  <span class="fw-bold text-dark">{{compra.6}} unidad</span>

                                  {% else %}
                                  <span class="fw-bold text-dark">{{compra.6}} unidades</span>

                                  {% endif %}
                                </td>
                                <td class="nk-tb-col" style="white-space:nowrap!important;">
                                  <span class="fw-bold text-teal">${{compra.7}} MXN.</span>
                                </td>
                               
                                
                                
      
                            </tr>
                            {% endfor %}
                            
                            
                            
                        </tbody>
                    </table>
      
                
                  </div>
                  {% else %}
                  <p class="fw-bold text-danger">No se han comprado productos gasto en el mes.</p>
                  {% endif %}

                            
      
                </div>
                <div class="tab-pane" id="productosRenta">
                  <div class="card-inner table-responsive">
                    <table class="datatable-init nk-tb-list nk-tb-ulist animate__animated animate__zoomIn" data-auto-responsive="false">
                        <thead>
                            <tr class="nk-tb-item nk-tb-head" style="background-color: #FF5D5D !important; color:white !important">
                              <th class="nk-tb-col"><span class="sub-text textoBlanco" style="white-space:nowrap!important;">Id</span></th>
                              <th class="nk-tb-col"><span class="sub-text textoBlanco">Producto</span></th>
                              <th class="nk-tb-col"><span class="sub-text textoBlanco">Fecha</span></th>
                              <th class="nk-tb-col"><span class="sub-text textoBlanco">Sucursal</span></th>
                              <th class="nk-tb-col"><span class="sub-text textoBlanco">Costo Compra</span></th>
                              <th class="nk-tb-col"><span class="sub-text textoBlanco">Cantidad Comprado</span></th>
                              <th class="nk-tb-col"><span class="sub-text textoBlanco">Total</span></th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for id, numVentas,contador,nombre, monto in empleadosTopsModal %}
                            <tr class="nk-tb-item">
                                <td class="nk-tb-col">
                                    <span class="badge badge-info">{{id}}</span>
                                </td>
                               
                                <td class="nk-tb-col">
                                        <div>
                                            <span class="badge badge-dark">{{nombre}}</span>
                                        </div>
                                    
                                    
                                </td>
                                <td class="nk-tb-col">
                                  <div>
                                      <span class="fw-bold text-azure">{{numVentas}} ventas</span>
                                  </div>
                              
                              
                          </td>
                                <td class="nk-tb-col" style="white-space:nowrap!important;">
                                    
                                  <center>
                                    <div>
                                        <span class="fw-bold text-teal">${{monto}} MXN.</span>
                                    </div>
                                </center>
                                </td>
                                
                               
      
                            </tr>
                            {% endfor %}
                            
                        </tbody>
                    </table>
      
                    {% for y in listaReversaEfectivo %}
                    <h1>{{y.id_venta}}</h1>
                    {% endfor %}
                
                  </div>
                </div>
            </div>



            
          </div>
          <div class="modal-footer bg-light">
              <span class="fw-bold text-pink">Costabella</span>
          </div>
      </div>
  </div>
</div>


<!-- MODAL DE RANGO DE FECHAS -->
<div class="modal fade" tabindex="-1" id="modalRangoFechas">
  <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
          <a href="#" class="close" data-dismiss="modal" aria-label="Close">
              <em class="icon ni ni-cross"></em>
          </a>
          <div class="modal-header">
              <h5 class="modal-title"><em class="icon ni ni-calendar-alt"></em>  Elegir Rango de Fechas</h5>
          </div>
          <div class="modal-body">
            <form action="/informeDeVentasRangoFechas/" method="POST"> {% csrf_token %}
              <div class="row gy-4">
                <div class="col-sm-6">
                  <div class="form-group">
                    <label class="form-label">Fecha de inicio</label>
                    <div class="form-control-wrap">
                        <div class="form-icon form-icon-left">
                            <em class="icon ni ni-calendar"></em>
                        </div>
                        <input type="text" name="fechaInicio" class="form-control date-picker" required data-date-format="yyyy-mm-dd">
                    </div>
                    <div class="form-note">Formato de fecha <code>año-mes-dia</code></div>
                </div>
                  
                </div>
                <div class="col-sm-6">
                  <div class="form-group">
                    <label class="form-label">Fecha Final</label>
                    <div class="form-control-wrap">
                        <div class="form-icon form-icon-left">
                            <em class="icon ni ni-calendar"></em>
                        </div>
                        <input type="text" name="fechaFinal" class="form-control date-picker" required data-date-format="yyyy-mm-dd">
                    </div>
                    <div class="form-note">Formato de fecha <code>año-mes-dia</code></div>
                  </div>
                  
                </div>
              </div>
              <br>
              <div class="text-right">
                
                <button type="submit" class="btn btn-dim btn-primary">Generar informe de ventas</button>
              </div>
            </form>
            
          </div>
          <div class="modal-footer bg-light">
            <span class="fw-bold text-pink">Costabella</span>
          </div>
      </div>
  </div>
</div>
{% block relojJS %}
<script>
    window.clearTimeout();
    window.onload = function() {

        window.onload= mueveReloj ();

        
    };
</script>
{% endblock %}

<script>
  function selectInforme()
  {

  var linkSelect = document.getElementById("selectInformeHtml").value;

  if (linkSelect == "rangofechas"){
    $('#modalRangoFechas').modal('show');
  }else{
    
    var link = linkSelect+"/";
    location.href=link
  }

  }
</script>
{% endblock %}


{% block codigojschart %}
<script>
    "use strict";

!function (NioApp, $) {
  "use strict"; //////// for developer - barchart //////// 
  // Avilable options to pass from outside 
  // labels: array,
  // stacked: false - boolean,
  // legend: false - boolean,
  // dataUnit: string, (Used in tooltip or other section for display) 
  // datasets: [{label : string, color: string (color code with # or other format), data: array}]

  var montoIngresoAñoActual = parseFloat("{{montoIngresoAñoActual}}");
  var sumaTotalesCompras = parseFloat("{{sumaTotalesCompras}}");
  var barChartData = {
    labels: ["Ingresos", "Compras"],
    dataUnit: '$MXN',
    datasets: [{
      color: ["#F76E11","#5FD068"],
      data: [montoIngresoAñoActual, sumaTotalesCompras]
    }]
  };
  var barChartMultiple = {
    labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
    dataUnit: 'USD',
    datasets: [{
      label: "Income",
      color: "#b695ff",
      data: [110, 80, 125, 55, 95, 75, 90, 110, 80, 125, 55, 95]
    }, {
      label: "Expense",
      color: "#f4aaa4",
      data: [75, 90, 110, 80, 125, 55, 95, 75, 90, 110, 80, 125]
    }]
  };
  var barChartStacked = {
    labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
    stacked: true,
    dataUnit: 'USD',
    datasets: [{
      label: "Income",
      color: "#b695ff",
      data: [110, 80, 125, 55, 95, 75, 90, 110, 80, 125, 55, 95]
    }, {
      label: "Expense",
      color: "#f4aaa4",
      data: [75, 90, 110, 80, 125, 55, 95, 75, 90, 110, 80, 125]
    }]
  };

  function barChart(selector, set_data) {
    var $selector = selector ? $(selector) : $('.bar-chart');
    $selector.each(function () {
      var $self = $(this),
          _self_id = $self.attr('id'),
          _get_data = typeof set_data === 'undefined' ? eval(_self_id) : set_data,
          _d_legend = typeof _get_data.legend === 'undefined' ? false : _get_data.legend;

      var selectCanvas = document.getElementById(_self_id).getContext("2d");
      var chart_data = [];

      for (var i = 0; i < _get_data.datasets.length; i++) {
        chart_data.push({
          label: _get_data.datasets[i].label,
          data: _get_data.datasets[i].data,
          // Styles
          backgroundColor: _get_data.datasets[i].color,
          borderWidth: 2,
          borderColor: 'transparent',
          hoverBorderColor: 'transparent',
          borderSkipped: 'bottom',
          barPercentage: .6,
          categoryPercentage: .7
        });
      }

      var chart = new Chart(selectCanvas, {
        type: 'bar',
        data: {
          labels: _get_data.labels,
          datasets: chart_data
        },
        options: {
          legend: {
            display: _get_data.legend ? _get_data.legend : false,
            rtl: NioApp.State.isRTL,
            labels: {
              boxWidth: 30,
              padding: 20,
              fontColor: '#6783b8'
            }
          },
          maintainAspectRatio: false,
          tooltips: {
            enabled: true,
            rtl: NioApp.State.isRTL,
            callbacks: {
              title: function title(tooltipItem, data) {
                return data.datasets[tooltipItem[0].datasetIndex].label;
              },
              label: function label(tooltipItem, data) {
                return data.datasets[tooltipItem.datasetIndex]['data'][tooltipItem['index']] + ' ' + _get_data.dataUnit;
              }
            },
            backgroundColor: '#eff6ff',
            titleFontSize: 13,
            titleFontColor: '#6783b8',
            titleMarginBottom: 6,
            bodyFontColor: '#9eaecf',
            bodyFontSize: 12,
            bodySpacing: 4,
            yPadding: 10,
            xPadding: 10,
            footerMarginTop: 0,
            displayColors: false
          },
          scales: {
            yAxes: [{
              display: true,
              stacked: _get_data.stacked ? _get_data.stacked : false,
              position: NioApp.State.isRTL ? "right" : "left",
              ticks: {
                beginAtZero: true,
                fontSize: 12,
                fontColor: '#9eaecf'
              },
              gridLines: {
                color: NioApp.hexRGB("#526484", .2),
                tickMarkLength: 0,
                zeroLineColor: NioApp.hexRGB("#526484", .2)
              }
            }],
            xAxes: [{
              display: true,
              stacked: _get_data.stacked ? _get_data.stacked : false,
              ticks: {
                fontSize: 12,
                fontColor: '#9eaecf',
                source: 'auto',
                reverse: NioApp.State.isRTL
              },
              gridLines: {
                color: "transparent",
                tickMarkLength: 10,
                zeroLineColor: 'transparent'
              }
            }]
          }
        }
      });
    });
  } // init bar chart


  barChart(); //////// for developer - linechart //////// 
  // Avilable options to pass from outside 
  // labels: array,
  // legend: false - boolean,
  // dataUnit: string, (Used in tooltip or other section for display) 
  // datasets: [{label : string, color: string (color code with # or other format), data: array}]

  var solidLineChart = {
    labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
    dataUnit: 'BTC',
    lineTension: .4,
    legend: true,
    datasets: [{
      label: "Total Received",
      color: "#5ce0aa",
      background: 'transparent',
      data: [110, 80, 125, 55, 95, 75, 90, 110, 80, 125, 55, 95]
    }, {
      label: "Total Send",
      color: "#9d72ff",
      background: 'transparent',
      data: [80, 54, 105, 120, 82, 85, 60, 80, 54, 105, 120, 82]
    }]
  };

  var montoIngresoAñoActual = parseFloat("{{montoIngresoAñoActual}}");
  var montoIngresoAñoAnterior = parseFloat("{{montoIngresoAñoAnterior}}");
  var montoIngresoHaceDosAños = parseFloat("{{montoIngresoHaceDosAños}}");
  var montoIngresoHaceTresAños = parseFloat("{{montoIngresoHaceTresAños}}");

  var añoHoy = "{{añoHoy}}";
  var strAñoAnterior = "{{strAñoAnterior}}";
  var strHaceDosAños = "{{strHaceDosAños}}";
  var strHaceTresAños = "{{strHaceTresAños}}";


  var filledLineChart = {
    labels: [strHaceTresAños, strHaceDosAños, strAñoAnterior, añoHoy],
    dataUnit: 'MXN.',
    lineTension: .4,
    datasets: [{
      label: "Total Received",
      color: "#9d72ff",
      background: NioApp.hexRGB('#9d72ff', .4),
      data: [montoIngresoHaceTresAños,montoIngresoHaceDosAños,montoIngresoAñoAnterior,montoIngresoAñoActual]
    }]
  };
  var straightLineChart = {
    labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
    dataUnit: 'BTC',
    lineTension: 0,
    datasets: [{
      label: "Total Received",
      color: "#9d72ff",
      background: NioApp.hexRGB('#9d72ff', .3),
      data: [110, 80, 125, 55, 95, 75, 90, 110, 80, 125, 55, 95]
    }]
  };

  function lineChart(selector, set_data) {
    var $selector = selector ? $(selector) : $('.line-chart');
    $selector.each(function () {
      var $self = $(this),
          _self_id = $self.attr('id'),
          _get_data = typeof set_data === 'undefined' ? eval(_self_id) : set_data;

      var selectCanvas = document.getElementById(_self_id).getContext("2d");
      var chart_data = [];

      for (var i = 0; i < _get_data.datasets.length; i++) {
        chart_data.push({
          label: _get_data.datasets[i].label,
          tension: _get_data.lineTension,
          backgroundColor: _get_data.datasets[i].background,
          borderWidth: 2,
          borderColor: _get_data.datasets[i].color,
          pointBorderColor: _get_data.datasets[i].color,
          pointBackgroundColor: '#fff',
          pointHoverBackgroundColor: "#fff",
          pointHoverBorderColor: _get_data.datasets[i].color,
          pointBorderWidth: 2,
          pointHoverRadius: 4,
          pointHoverBorderWidth: 2,
          pointRadius: 4,
          pointHitRadius: 4,
          data: _get_data.datasets[i].data
        });
      }

      var chart = new Chart(selectCanvas, {
        type: 'line',
        data: {
          labels: _get_data.labels,
          datasets: chart_data
        },
        options: {
          legend: {
            display: _get_data.legend ? _get_data.legend : false,
            rtl: NioApp.State.isRTL,
            labels: {
              boxWidth: 12,
              padding: 20,
              fontColor: '#6783b8'
            }
          },
          maintainAspectRatio: false,
          tooltips: {
            enabled: true,
            rtl: NioApp.State.isRTL,
            callbacks: {
              title: function title(tooltipItem, data) {
                return data['labels'][tooltipItem[0]['index']];
              },
              label: function label(tooltipItem, data) {
                return data.datasets[tooltipItem.datasetIndex]['data'][tooltipItem['index']] + ' ' + _get_data.dataUnit;
              }
            },
            backgroundColor: '#eff6ff',
            titleFontSize: 13,
            titleFontColor: '#6783b8',
            titleMarginBottom: 6,
            bodyFontColor: '#9eaecf',
            bodyFontSize: 12,
            bodySpacing: 4,
            yPadding: 10,
            xPadding: 10,
            footerMarginTop: 0,
            displayColors: false
          },
          scales: {
            yAxes: [{
              display: true,
              position: NioApp.State.isRTL ? "right" : "left",
              ticks: {
                beginAtZero: false,
                fontSize: 12,
                fontColor: '#9eaecf',
                padding: 10
              },
              gridLines: {
                color: NioApp.hexRGB("#526484", .2),
                tickMarkLength: 0,
                zeroLineColor: NioApp.hexRGB("#526484", .2)
              }
            }],
            xAxes: [{
              display: true,
              ticks: {
                fontSize: 12,
                fontColor: '#9eaecf',
                source: 'auto',
                padding: 5,
                reverse: NioApp.State.isRTL
              },
              gridLines: {
                color: "transparent",
                tickMarkLength: 10,
                zeroLineColor: NioApp.hexRGB("#526484", .2),
                offsetGridLines: true
              }
            }]
          }
        }
      });
    });
  } // init line chart


  lineChart(); //////// for developer - pieChart //////// 
  // Avilable options to pass from outside 
  // labels: array,
  // legend: false - boolean,
  // dataUnit: string, (Used in tooltip or other section for display) 
  // datasets: [{label : string, color: string (color code with # or other format), data: array}]

  var ventasMes = parseInt("{{contadorVentasmesActual}}");
  var rentasMes = parseInt("{{contadorRentasmesActual}}");
  var creditosMes = parseInt("{{contadorCreditosmesActual}}");

  var pieChartData = {
    labels: ["Ventas", "Rentas", "Créditos"],
    dataUnit: 'MXN',
    legend: false,
    datasets: [{
      borderColor: "#F9F3F3",
      background: ["#FD5D5D", "#AB46D2", "#FCF69C"],
      data: [ventasMes, rentasMes, creditosMes]
    }]
  };

  function pieChart(selector, set_data) {
    var $selector = selector ? $(selector) : $('.pie-chart');
    $selector.each(function () {
      var $self = $(this),
          _self_id = $self.attr('id'),
          _get_data = typeof set_data === 'undefined' ? eval(_self_id) : set_data;

      var selectCanvas = document.getElementById(_self_id).getContext("2d");
      var chart_data = [];

      for (var i = 0; i < _get_data.datasets.length; i++) {
        chart_data.push({
          backgroundColor: _get_data.datasets[i].background,
          borderWidth: 2,
          borderColor: _get_data.datasets[i].borderColor,
          hoverBorderColor: _get_data.datasets[i].borderColor,
          data: _get_data.datasets[i].data
        });
      }

      var chart = new Chart(selectCanvas, {
        type: 'pie',
        data: {
          labels: _get_data.labels,
          datasets: chart_data
        },
        options: {
          legend: {
            display: _get_data.legend ? _get_data.legend : false,
            rtl: NioApp.State.isRTL,
            labels: {
              boxWidth: 12,
              padding: 20,
              fontColor: '#6783b8'
            }
          },
          rotation: -.2,
          maintainAspectRatio: false,
          tooltips: {
            enabled: true,
            rtl: NioApp.State.isRTL,
            callbacks: {
              title: function title(tooltipItem, data) {
                return data['labels'][tooltipItem[0]['index']];
              },
              label: function label(tooltipItem, data) {
                return data.datasets[tooltipItem.datasetIndex]['data'][tooltipItem['index']] + ' ' + _get_data.dataUnit;
              }
            },
            backgroundColor: '#eff6ff',
            titleFontSize: 13,
            titleFontColor: '#6783b8',
            titleMarginBottom: 6,
            bodyFontColor: '#9eaecf',
            bodyFontSize: 12,
            bodySpacing: 4,
            yPadding: 10,
            xPadding: 10,
            footerMarginTop: 0,
            displayColors: false
          }
        }
      });
    });
  } // init pie chart


  pieChart();
  var doughnutChartData = {
    labels: ["Send", "Receive", "Withdraw"],
    dataUnit: 'BTC',
    legend: false,
    datasets: [{
      borderColor: "#fff",
      background: ["#b695ff", "#f4aaa4", "#8feac5"],
      data: [110, 80, 125]
    }]
  };

  function doughnutChart(selector, set_data) {
    var $selector = selector ? $(selector) : $('.doughnut-chart');
    $selector.each(function () {
      var $self = $(this),
          _self_id = $self.attr('id'),
          _get_data = typeof set_data === 'undefined' ? eval(_self_id) : set_data;

      var selectCanvas = document.getElementById(_self_id).getContext("2d");
      var chart_data = [];

      for (var i = 0; i < _get_data.datasets.length; i++) {
        chart_data.push({
          backgroundColor: _get_data.datasets[i].background,
          borderWidth: 2,
          borderColor: _get_data.datasets[i].borderColor,
          hoverBorderColor: _get_data.datasets[i].borderColor,
          data: _get_data.datasets[i].data
        });
      }

      var chart = new Chart(selectCanvas, {
        type: 'doughnut',
        data: {
          labels: _get_data.labels,
          datasets: chart_data
        },
        options: {
          legend: {
            display: _get_data.legend ? _get_data.legend : false,
            rtl: NioApp.State.isRTL,
            labels: {
              boxWidth: 12,
              padding: 20,
              fontColor: '#6783b8'
            }
          },
          rotation: 1,
          cutoutPercentage: 40,
          maintainAspectRatio: false,
          tooltips: {
            enabled: true,
            rtl: NioApp.State.isRTL,
            callbacks: {
              title: function title(tooltipItem, data) {
                return data['labels'][tooltipItem[0]['index']];
              },
              label: function label(tooltipItem, data) {
                return data.datasets[tooltipItem.datasetIndex]['data'][tooltipItem['index']] + ' ' + _get_data.dataUnit;
              }
            },
            backgroundColor: '#eff6ff',
            titleFontSize: 13,
            titleFontColor: '#6783b8',
            titleMarginBottom: 6,
            bodyFontColor: '#9eaecf',
            bodyFontSize: 12,
            bodySpacing: 4,
            yPadding: 10,
            xPadding: 10,
            footerMarginTop: 0,
            displayColors: false
          }
        }
      });
    });
  } // init doughnut chart


  doughnutChart();
  var polarChartData = {
    labels: ["Send", "Receive", "Withdraw"],
    dataUnit: 'BTC',
    legend: false,
    datasets: [{
      borderColor: "#fff",
      background: [NioApp.hexRGB("#b695ff", .8), NioApp.hexRGB("#f4aaa4", .8), NioApp.hexRGB("#8feac5", .8)],
      data: [110, 80, 125]
    }]
  };

  function polarAreaChart(selector, set_data) {
    var $selector = selector ? $(selector) : $('.polar-chart');
    $selector.each(function () {
      var $self = $(this),
          _self_id = $self.attr('id'),
          _get_data = typeof set_data === 'undefined' ? eval(_self_id) : set_data;

      var selectCanvas = document.getElementById(_self_id).getContext("2d");
      var chart_data = [];

      for (var i = 0; i < _get_data.datasets.length; i++) {
        chart_data.push({
          backgroundColor: _get_data.datasets[i].background,
          borderWidth: 2,
          borderColor: _get_data.datasets[i].borderColor,
          hoverBorderColor: _get_data.datasets[i].borderColor,
          data: _get_data.datasets[i].data
        });
      }

      var chart = new Chart(selectCanvas, {
        type: 'polarArea',
        data: {
          labels: _get_data.labels,
          datasets: chart_data
        },
        options: {
          legend: {
            display: _get_data.legend ? _get_data.legend : false,
            rtl: NioApp.State.isRTL,
            labels: {
              boxWidth: 12,
              padding: 20,
              fontColor: '#6783b8'
            }
          },
          maintainAspectRatio: false,
          tooltips: {
            enabled: true,
            rtl: NioApp.State.isRTL,
            callbacks: {
              title: function title(tooltipItem, data) {
                return data['labels'][tooltipItem[0]['index']];
              },
              label: function label(tooltipItem, data) {
                return data.datasets[tooltipItem.datasetIndex]['data'][tooltipItem['index']] + ' ' + _get_data.dataUnit;
              }
            },
            backgroundColor: '#eff6ff',
            titleFontSize: 13,
            titleFontColor: '#6783b8',
            titleMarginBottom: 6,
            bodyFontColor: '#9eaecf',
            bodyFontSize: 12,
            bodySpacing: 4,
            yPadding: 10,
            xPadding: 10,
            footerMarginTop: 0,
            displayColors: false
          }
        }
      });
    });
  } // init line chart


  polarAreaChart();

  var totalVentaAño = parseFloat("{{contadorVentasAñoActual}}");
  var totalRentaAño = parseFloat("{{contadorRentasAñoActual}}");
  var totalCreditoAño = parseFloat("{{contadorCreditosAñoActual}}");

  var TrafficChannelDoughnutData = {
    labels: ["Ventas", "Rentas", "Créditos"],
    dataUnit: '$MXN',
    legend: false,
    datasets: [{
      borderColor: "#fff",
      background: ["#FD5D5D", "#55D8C1", "#FCF69C"],
      data: [totalVentaAño, totalRentaAño, totalCreditoAño]
    }]
  };

  function analyticsDoughnut(selector, set_data) {
    var $selector = selector ? $(selector) : $('.analytics-doughnut');
    $selector.each(function () {
      var $self = $(this),
          _self_id = $self.attr('id'),
          _get_data = typeof set_data === 'undefined' ? eval(_self_id) : set_data;

      var selectCanvas = document.getElementById(_self_id).getContext("2d");
      var chart_data = [];

      for (var i = 0; i < _get_data.datasets.length; i++) {
        chart_data.push({
          backgroundColor: _get_data.datasets[i].background,
          borderWidth: 2,
          borderColor: _get_data.datasets[i].borderColor,
          hoverBorderColor: _get_data.datasets[i].borderColor,
          data: _get_data.datasets[i].data
        });
      }

      var chart = new Chart(selectCanvas, {
        type: 'doughnut',
        data: {
          labels: _get_data.labels,
          datasets: chart_data
        },
        options: {
          legend: {
            display: _get_data.legend ? _get_data.legend : false,
            rtl: NioApp.State.isRTL,
            labels: {
              boxWidth: 12,
              padding: 20,
              fontColor: '#6783b8'
            }
          },
          rotation: -1.5,
          cutoutPercentage: 70,
          maintainAspectRatio: false,
          tooltips: {
            enabled: true,
            rtl: NioApp.State.isRTL,
            callbacks: {
              title: function title(tooltipItem, data) {
                return data['labels'][tooltipItem[0]['index']];
              },
              label: function label(tooltipItem, data) {
                return data.datasets[tooltipItem.datasetIndex]['data'][tooltipItem['index']] + ' ' + _get_data.dataUnit;
              }
            },
            backgroundColor: '#1c2b46',
            titleFontSize: 13,
            titleFontColor: '#fff',
            titleMarginBottom: 6,
            bodyFontColor: '#fff',
            bodyFontSize: 12,
            bodySpacing: 4,
            yPadding: 10,
            xPadding: 10,
            footerMarginTop: 0,
            displayColors: false
          }
        }
      });
    });
  } // init chart


  NioApp.coms.docReady.push(function () {
    analyticsDoughnut();
  });
}(NioApp, jQuery);
</script>


{% endblock %}

